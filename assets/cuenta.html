<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#0b111b" />
  <title>Crear cuenta - Empleos en Comunidad</title>
  <link rel="manifest" href="manifest.webmanifest" crossorigin="use-credentials" />
  <link rel="icon" type="image/svg+xml" sizes="192x192" href="../icons/icon-192.svg" />
  <link rel="icon" type="image/svg+xml" sizes="512x512" href="../icons/icon-512.svg" />
  <link rel="apple-touch-icon" href="../icons/icon-192.svg" />
  <link rel="stylesheet" href="styles.base.css" />
  <link rel="stylesheet" href="styles.layout.css" />
  <link rel="stylesheet" href="styles.components.css" />
  <link rel="stylesheet" href="styles.css" />
  <script src="https://cdn.jsdelivr.net/npm/pocketbase@0.21.0/dist/pocketbase.umd.js"></script>
</head>
<body>
  <main class="container">
    <a href="../index.html" class="back-link">â† Volver al inicio</a>
    <h1><a href="../index.html" class="page-title-link">Empleos en Comunidad</a></h1>

    <section class="card account-card">
      <p class="form-intro" id="textoRegistro">Crea una cuenta Ãºnica para gestionar tus perfiles de oficio y tus ofertas de empleo.</p>
      <p class="form-intro is-hidden" id="textoLogin">Inicia sesiÃ³n con tu cuenta existente para gestionar tus perfiles y ofertas.</p>

      <!-- Formulario de registro -->
      <form id="frmCuentaRegistro" class="form-vertical">
        <div class="form-group">
          <label for="cuentaNombre">Nombre completo *</label>
          <input type="text" id="cuentaNombre" required minlength="3" placeholder="Tu nombre y apellidos" />
        </div>

        <div class="form-group">
          <label for="cuentaWhatsapp">WhatsApp de contacto *</label>
          <input type="tel" id="cuentaWhatsapp" required pattern="[0-9]{9}" placeholder="Solo nÃºmeros (9 dÃ­gitos, ej: 612345678)" />
          <small>Introduce un nÃºmero con exactamente 9 dÃ­gitos. Lo usaremos como dato principal de contacto en tus perfiles y ofertas.</small>
        </div>

        <div class="form-group">
          <label for="cuentaEmail">Correo electrÃ³nico *</label>
          <input type="text" id="cuentaEmail" required placeholder="tucorreo@ejemplo.com" />
        </div>

        <div class="form-group">
          <label for="cuentaPassword">ContraseÃ±a *</label>
          <div class="password-wrapper">
            <input type="password" id="cuentaPassword" required minlength="8" />
            <button type="button" id="btnTogglePassword" class="password-toggle" style="display:none;" aria-label="Mostrar u ocultar contraseÃ±a">ğŸ‘</button>
          </div>
          <small id="cuentaPasswordError" class="field-error"></small>
        </div>

        <div class="form-group">
          <label for="cuentaPasswordConfirm">Confirmar contraseÃ±a *</label>
          <div class="password-wrapper">
            <input type="password" id="cuentaPasswordConfirm" required minlength="6" />
            <button type="button" id="btnTogglePasswordConfirm" class="password-toggle" style="display:none;" aria-label="Mostrar u ocultar contraseÃ±a de confirmaciÃ³n">ğŸ‘</button>
          </div>
        </div>

        <div class="dialog-footer">
          <button type="submit" id="btnCrearCuenta" class="primary">Crear cuenta y continuar</button>
          <button type="button" id="btnCancelarCuenta" class="secondary">Cancelar</button>
        </div>

        <p class="text-center cuenta-links-bottom is-hidden" id="registroEmailExisteActions">
          <button type="button" id="btnIrLoginDesdeEmailExiste" class="link-button">Â¿Ya tienes cuenta? Iniciar sesiÃ³n</button>
          <span class="separator">|</span>
          <button type="button" id="btnReenviarVerificacion" class="link-button">Reenviar correo de verificaciÃ³n</button>
        </p>

        <p class="text-center cuenta-links-bottom is-hidden" id="registroPostCreateActions">
          <button type="button" id="btnIrLoginPostRegistro" class="link-button">Ya verifiquÃ© mi correo. Iniciar sesiÃ³n</button>
        </p>
      </form>

      <!-- Formulario de login -->
      <form id="frmCuentaLogin" class="form-vertical is-hidden">
        <div class="form-group">
          <label for="loginEmail">Correo electrÃ³nico *</label>
          <input type="text" id="loginEmail" required placeholder="tucorreo@ejemplo.com" />
        </div>

        <div class="form-group">
          <label for="loginPassword">ContraseÃ±a *</label>
          <div class="password-wrapper">
            <input type="password" id="loginPassword" required />
            <button type="button" id="btnTogglePasswordLogin" class="password-toggle" style="display:none;" aria-label="Mostrar u ocultar contraseÃ±a de inicio de sesiÃ³n">ğŸ‘</button>
          </div>
        </div>

        <div class="dialog-footer">
          <button type="submit" id="btnLogin" class="primary">Iniciar sesiÃ³n</button>
          <button type="button" id="btnCancelarLogin" class="secondary">Cancelar</button>
        </div>
        <p class="text-center cuenta-links-top is-hidden" id="loginLinksTop">
          <button type="button" id="btnOlvidoPassword" class="link-button">Â¿Has olvidado tu contraseÃ±a?</button>
        </p>
        <p class="text-center cuenta-links-bottom is-hidden" id="loginLinksBottom">
          <button type="button" id="btnIrRegistroDesdeLogin" class="link-button">Â¿No tienes cuenta? Crear una nueva</button>
        </p>
      </form>

      <p id="cuentaMensaje" class="status-message"></p>
    </section>

    <!-- DiÃ¡logos de TÃ©rminos y Privacidad -->
    <dialog id="dlgLicense" class="help-dialog">
      <div class="help-header">
        <h2>ğŸ“„ TÃ©rminos de Uso</h2>
        <button type="button" class="help-close" id="btnCerrarLicense">âœ•</button>
      </div>
      <div id="licenseContent" class="help-content"></div>
    </dialog>

    <dialog id="dlgPrivacy" class="help-dialog">
      <div class="help-header">
        <h2>ğŸ”’ PolÃ­tica de Privacidad</h2>
        <button type="button" class="help-close" id="btnCerrarPrivacy">âœ•</button>
      </div>
      <div id="privacyContent" class="help-content"></div>
    </dialog>

    <footer class="footer">
      <div class="footer-content">
        <p>&copy; 2025 GMR - Empleos en Comunidad - Todos los derechos reservados</p>
        <div class="footer-links">
          <a href="#" id="linkLicense">TÃ©rminos de Uso</a>
          <span class="separator">|</span>
          <a href="#" id="linkPrivacy">PolÃ­tica de Privacidad</a>
        </div>
      </div>
    </footer>
  </main>

  <script src="core.pb.js?v=1"></script>
  <script src="core.ui.js?v=1"></script>
  <script src="cuenta.js?v=1"></script>
</body>
</html>
