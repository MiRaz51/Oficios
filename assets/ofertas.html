<!doctype html>
<html lang="es">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#0b111b" />
  <title>Ofertas de Empleo - Empleos en Comunidad</title>
  <meta name="description" content="Encuentra ofertas de trabajo en tu comunidad para diferentes oficios." />
  <link rel="manifest" href="manifest.webmanifest" crossorigin="use-credentials" />
  <link rel="icon" type="image/svg+xml" sizes="192x192" href="../icons/icon-192.svg" />
  <link rel="icon" type="image/svg+xml" sizes="512x512" href="../icons/icon-512.svg" />
  <link rel="apple-touch-icon" href="../icons/icon-192.svg" />
  <link rel="stylesheet" href="styles.base.css" />
  <link rel="stylesheet" href="styles.layout.css" />
  <link rel="stylesheet" href="styles.components.css" />
  <link rel="stylesheet" href="styles.css" />

  <!-- PocketBase SDK -->
  <script src="https://cdn.jsdelivr.net/npm/pocketbase@0.21.0/dist/pocketbase.umd.js"></script>
</head>

<body>
  <main class="container">
    <header class="page-header">
      <a href="../index.html" class="back-link">‚Üê Volver al inicio</a>
      <h1><a href="../index.html" class="page-title-link">Ofertas de Empleo</a></h1>
      <p class="page-subtitle">Encuentra oportunidades de trabajo publicadas en la comunidad.</p>
    </header>

    <section class="toolbar">
      <input id="q-ofertas" placeholder="Buscar por t√≠tulo o palabra clave" />
      <select id="sel-ubicacion-ofertas">
        <option value="">Todas las ubicaciones</option>
      </select>
      <select id="sel-modalidad-ofertas">
        <option value="">Todas las modalidades</option>
      </select>
      <button id="btn-reset-ofertas" class="secondary">Limpiar</button>

      <button id="btn-publicar-oferta" class="primary">üì£ Publicar Oferta</button>

      <div id="userMenu" class="user-menu">
        <button id="btnUserMenu" type="button" class="user-menu-button" aria-label="Men√∫ de usuario">
          <span id="userMenuIcon" class="user-menu-icon">‚èª</span>
        </button>
        <div id="userMenuDropdown" class="user-menu-dropdown">
          <button type="button" id="btnLoginCuenta">Iniciar sesi√≥n</button>
          <button type="button" id="btnRegistroCuenta">Crear cuenta</button>
          <button type="button" id="btnMiPerfil">Mi perfil</button>
          <button type="button" id="btnCambiarVista">Ver oficios</button>
          <button type="button" id="btnLogout">Cerrar sesi√≥n</button>
        </div>
      </div>
    </section>

    <!-- Aqu√≠ se mostrar√°n las ofertas -->
    <section class="ofertas-wrapper">
      <div id="ofertas-lista" class="ofertas-grid"></div>
    </section>

    <!-- Mensaje de carga o si no hay resultados -->
    <div id="mensaje-estado" class="hidden text-center p-2rem"></div>

    <!-- Modal para Publicar Oferta -->
    <dialog id="dlg-publicar-oferta">
      <form method="dialog" id="frm-publicar-oferta">
        <div class="dialog-header">
          <h3>üì£ Publicar una Oferta de Empleo</h3>
        </div>
        <div class="dialog-container">
          <p class="form-intro">Completa los campos para publicar tu oferta. Ser√° visible para todos en la comunidad.</p>
          
          <div class="form-group">
            <label for="oferta-titulo">Oficio / Profesi√≥n de la oferta *</label>
            <select id="oferta-titulo" required>
              <option value="">Selecciona un oficio...</option>
              <optgroup label="Construcci√≥n y Mantenimiento">
                <option value="Fontanero">Fontanero</option>
                <option value="Electricista">Electricista</option>
                <option value="Pintor">Pintor</option>
                <option value="Alba√±il">Alba√±il</option>
                <option value="Carpintero">Carpintero</option>
                <option value="Cerrajero">Cerrajero</option>
              </optgroup>
              <optgroup label="Hogar y Limpieza">
                <option value="Limpieza del Hogar">Limpieza del Hogar</option>
                <option value="Jardinero">Jardinero</option>
                <option value="Cuidador/a de Personas Mayores">Cuidador/a de Personas Mayores</option>
                <option value="Cuidador/a de Ni√±os">Cuidador/a de Ni√±os</option>
              </optgroup>
              <optgroup label="Reparaciones">
                <option value="T√©cnico de Electrodom√©sticos">T√©cnico de Electrodom√©sticos</option>
                <option value="T√©cnico de Aire Acondicionado">T√©cnico de Aire Acondicionado</option>
                <option value="Mec√°nico de Autom√≥viles">Mec√°nico de Autom√≥viles</option>
                <option value="Reparaci√≥n de Ordenadores">Reparaci√≥n de Ordenadores</option>
              </optgroup>
              <optgroup label="Servicios Especializados">
                <option value="Profesor Particular">Profesor Particular</option>
                <option value="Dise√±ador Gr√°fico">Dise√±ador Gr√°fico</option>
                <option value="Fot√≥grafo">Fot√≥grafo</option>
                <option value="Traductor">Traductor</option>
              </optgroup>
              <optgroup label="Otros Servicios">
                <option value="Mudanzas">Mudanzas</option>
                <option value="Transporte">Transporte</option>
                <option value="Peluquero/a">Peluquero/a</option>
                <option value="Otros">Otros</option>
              </optgroup>
            </select>
          </div>

          <div class="form-group">
            <label for="oferta-ubicacion">Ubicaci√≥n *</label>
            <input type="text" id="oferta-ubicacion" required placeholder="Ej: Valencia, Centro">
          </div>

          <div class="form-group">
            <label for="oferta-modalidad">Modalidad *</label>
            <select id="oferta-modalidad" required>
              <option value="presencial">Presencial</option>
              <option value="remoto">Remoto</option>
              <option value="hibrido">H√≠brido</option>
            </select>
          </div>

          <div class="form-group">
            <label for="oferta-descripcion">Descripci√≥n de la oferta *</label>
            <textarea id="oferta-descripcion" rows="4" required placeholder="Describe las tareas, requisitos y condiciones del trabajo..."></textarea>
          </div>

          <div class="form-group">
            <label for="oferta-whatsapp">WhatsApp de Contacto *</label>
            <input type="tel" id="oferta-whatsapp" required pattern="[0-9]{9}" placeholder="N√∫mero nacional (9 d√≠gitos, sin prefijo)" readonly>
            <small>Se usar√° el n√∫mero de WhatsApp de tu cuenta (9 d√≠gitos). El prefijo 34 se a√±adir√° autom√°ticamente.</small>
          </div>

        </div>
        <div class="dialog-footer">
          <button type="submit" id="btn-enviar-oferta" class="primary">Publicar Oferta</button>
          <button type="button" id="btn-cancelar-oferta" class="secondary">Cancelar</button>
        </div>
      </form>
    </dialog>

    <!-- Di√°logos de Ayuda -->
    <dialog id="dlgHelp" class="help-dialog">
      <div class="help-header">
        <h2>üíº Gu√≠a de Usuario</h2>
        <button type="button" class="help-close" id="btnCerrarHelp">‚úï</button>
      </div>
      <div id="helpContent" class="help-content"></div>
    </dialog>

    <dialog id="dlgLicense" class="help-dialog">
      <div class="help-header">
        <h2>üìÑ T√©rminos de Uso</h2>
        <button type="button" class="help-close" id="btnCerrarLicense">‚úï</button>
      </div>
      <div id="licenseContent" class="help-content"></div>
    </dialog>

    <dialog id="dlgPrivacy" class="help-dialog">
      <div class="help-header">
        <h2>üîí Pol√≠tica de Privacidad</h2>
        <button type="button" class="help-close" id="btnCerrarPrivacy">‚úï</button>
      </div>
      <div id="privacyContent" class="help-content"></div>
    </dialog>

    <footer class="footer">
      <div class="footer-content">
        <p>&copy; 2025 GMR - Empleos en Comunidad - Todos los derechos reservados</p>
        <div class="footer-links">
          <a href="#" id="linkLicense">T√©rminos de Uso</a>
          <span class="separator">|</span>
          <a href="#" id="linkPrivacy">Pol√≠tica de Privacidad</a>
        </div>
      </div>
    </footer>
  </main>

  <!-- Librer√≠a para b√∫squeda difusa (Fuzzy Search) -->
  <script src="https://cdn.jsdelivr.net/npm/fuse.js@7.0.0/dist/fuse.min.js"></script>
  <!-- Librer√≠a para renderizar Markdown -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="core.pb.js?v=1"></script>
  <script src="usuario.js?v=1"></script>
  <script src="core.ui.js?v=1"></script>
  <script src="ofertas.js?v=2"></script>
</body>

</html>
